// util.js
var oauth   = require("oauth")
var error   = require("./error.js")

this.oauth = new oauth.OAuth2(
			process.env.cId, process.env.cKey,
			'https://twinoid.com/', 'oauth/auth', 'oauth/token', null
		)

this.need = { 
	auth: function auth(req, res, next){
		console.log(req.session)
		console.log(req.session.uid)
		if(!req.session) return next(new Error())
		if(!req.session.uid) return next(new error.Unauthorized("login required"))
		next()
	}
}
